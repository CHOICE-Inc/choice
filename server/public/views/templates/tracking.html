<!-- GOAL TRACKING PAGE - Page will let users log completion of goals -->

<!--
//This page will display the participants on the left side of the page
//The right side of the page will load each goal using the singleGoal.html partial file
//The right side may also show the singleGoalSummary.html (w/ summary data table) for a goal-->
<div id="footer" style="background-color:transparent;position: fixed;bottom: 0;width: 100%;height:60px;pointer-events:none">

</div>
<button type="button" name="button" ng-click="tc.test()">TEST</button>
GOAL TRACKING PAGE
<div style="margin-left:auto;margin-right:auto" layout="column" flex="90" class="container" id="toastTest">


  <div layout="row">
    <div style="background-color:skyblue;min-height:1000px;border-right:2px solid black" layout="column" flex="20">
      <div style="font-size:24px;text-align:center">
        Client List
      </div>

      <md-select ng-model="tc.filterCm" placeholder="Case Manager" class="md-no-underline">
        <md-option value="all">All</md-option>
        <md-option ng-repeat="cm in tc.caseManagers" ng-value="cm">{{cm}}</md-option>
      </md-select>

      <md-select ng-model="tc.filterJs" placeholder="Job Site" class="md-no-underline">
        <md-option value="all">All</md-option>
        <md-option ng-repeat="loc in tc.locationList" ng-value="loc">{{loc}}</md-option>
      </md-select>



      <button type="button" name="button" ng-click="tc.filterClients(tc.dataList)">Filter</button>




      <div>

          <p ng-repeat="client in tc.clientList" ng-click="tc.showClientGoals(client)">{{client.client_name}}</p>

      </div>
    </div>

    <div style="background-color:skyblue;min-height:1000px" layout="column" flex="80">

      <p>Client Name: {{tc.clientToView.client_name}}</p>
      <p>Case Manager: {{tc.clientToView.staff_name}}</p>

      <div ng-repeat="goal in tc.clientGoals" style="width:90%;background-color:yellow;margin-left:auto,margin-right:auto">
        <div style="background-color:orange;text-align:center;font-size:32px">
          {{goal.goalname}}
        </div>
        <div layout="row">
          <div flex="50">GOAL LOCATION: {{goal.business_name}}</div>

          <div flex="50" style="text-align:right;">
            <md-button ng-hide="goal.hidden == true" class="md-raised md-primary" style="display:inline-block" type="button" name="button" ng-click="tc.toGoalCriteria(goal)">Goal Criteria</md-button>
            <md-button ng-hide="goal.hidden == true" class="md-raised md-primary" style="display:inline-block" type="button" name="button" ng-click="tc.toGoalHistory(goal)">Goal History</md-button>
            <md-button ng-show="goal.hidden == true" class="md-raised md-primary" style="display:inline-block" type="button" name="button" ng-click="tc.toGoalHistory(goal)">Back to Tracking</md-button>
          </div>


        </div>
<div ng-hide="goal.hidden == true">
        <div>
          <p>
            GOAL NOTES: {{goal.goalnotes}}
          </p>
        </div>



        <div>
          DATE: {{tc.today | date}}
        </div>
        <div layout="row">
          <div>


            <md-radio-group layout="column" style="color:black" ng-model="goal.amOrPm">
              <span>Time</span>
              <md-radio-button value="am" class="md-primary">AM</md-radio-button>
              <md-radio-button value="pm" class="md-primary">PM</md-radio-button>
            </md-radio-group>
          </div>
          <div>
            <md-radio-group layout="row" style="color:black" ng-model="goal.completion">
              <md-radio-button value="complete" class="md-primary">Complete</md-radio-button>
              <md-radio-button value="incomplete" class="md-primary">Incomplete</md-radio-button>
              <md-radio-button value="absent" class="md-primary">Absent</md-radio-button>
              <md-radio-button value="na" class="md-primary">NA</md-radio-button>
            </md-radio-group>
          </div>

        </div>
        <label>Initials</label><input type="text" name="" ng-model="tc.initials">
        <div>
          NOTES: <input type="text" name="" ng-model="goal.notes">
          <md-button type="button" name="button" class="md-raised md-primary" ng-click="tc.trackGoal(goal)">Submit</md-button>
        </div>
<div>
  <p>Last updated: {{goal.lastUpdate | date}}</p>
  <p ng-show="goal.amDone == true">Today's AM update is complete</p>
  <p ng-show="goal.pmDone ==  true">Today's PM update is complete</p>
</div>

</div><!-- end tracking div -->
<div ng-show="goal.hidden == true"> <!-- history div-->
<div layout="row">


  Dates between:
  <div flex-gt-xs>
      <md-datepicker ng-model="goal.historyStart" md-placeholder="Enter date" md-open-on-focus></md-datepicker>
    </div>
    <span> and </span>
    <div flex-gt-xs>
        <md-datepicker ng-model="goal.historyEnd" md-placeholder="Enter date" md-open-on-focus></md-datepicker>
      </div>
<md-button type="button" name="button" class="md-raised md-primary" ng-click="tc.filterHistory(goal)">Filter</md-button>
</div>

<div>

  GOAL HISTORY TABLE
  <table>
  <tr class="header">
    <th style="width:20%;">Date</th>
    <th style="width:10%;">Time</th>
    <th style="width:10%;">Initials</th>
    <th style="width:20%;">Completion</th>
    <th style="width:40%;">Notes</th>
    <th style="width:40%;">Buttons</th>
  </tr>
  <tr ng-repeat="gh in goal.history">
    <td>{{gh.date_tracked | date}}</td>
    <td>{{gh.am_or_pm}}</td>
    <td>IN</td>
    <td>{{gh.complete_or_not}}</td>
    <td>{{gh.notes}}</td>
    <td><button type="button" name="button">Edit</button>
      <button type="button" name="button">Delete</button>
    </td>
  </tr>

</table>
</div>

</div><!--end history div -->
      </div> <!-- end goal div -->
    </div>
  </div>
